<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>NHL Offensive Archetypes — Beyond the Metric</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=DM+Sans:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap');

:root {
  --bg-deep:    #080b10;
  --bg-surface: #0c1018;
  --bg-card:    #111820;
  --border:     #1a2233;
  --border-hi:  #243044;
  --text-1:     #e2e8f0;
  --text-2:     #8b9ab5;
  --text-3:     #4a5568;
  --cyan:       #00d4ff;
  --cyan-dim:   rgba(0,212,255,0.15);
  --amber:      #FFB347;
  --amber-dim:  rgba(255,179,71,0.12);
  --red:        #e74c3c;
  --red-dim:    rgba(231,76,60,0.10);
  --grey:       #6b7a8d;
  --grey-dim:   rgba(107,122,141,0.08);
  --glow-cyan:  0 0 20px rgba(0,212,255,0.3);
  --glow-amber: 0 0 20px rgba(255,179,71,0.3);
  --glow-red:   0 0 20px rgba(231,76,60,0.3);
}

* { margin:0; padding:0; box-sizing:border-box; }

body {
  background: var(--bg-deep);
  color: var(--text-1);
  font-family: 'DM Sans', sans-serif;
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
}

/* ─── Container ─── */
.viz-container {
  max-width: 1040px;
  margin: 0 auto;
  padding: 20px 24px 30px;
  position: relative;
}

/* ─── Header ─── */
.viz-header {
  text-align: center;
  margin-bottom: 18px;
}
.viz-header h1 {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 28px;
  font-weight: 700;
  letter-spacing: -0.5px;
  color: var(--text-1);
  margin-bottom: 6px;
}
.viz-header h1 span {
  background: linear-gradient(135deg, var(--cyan), #60a5fa);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
}
.viz-header .subtitle {
  font-size: 13px;
  color: var(--text-2);
  font-weight: 400;
}

/* ─── Legend ─── */
.legend-bar {
  display: flex;
  justify-content: center;
  gap: 24px;
  margin-bottom: 12px;
  flex-wrap: wrap;
}
.legend-item {
  display: flex;
  align-items: center;
  gap: 7px;
  font-size: 12px;
  font-weight: 600;
  letter-spacing: 0.5px;
  text-transform: uppercase;
  cursor: pointer;
  padding: 4px 10px;
  border-radius: 4px;
  transition: all 0.2s;
  user-select: none;
}
.legend-item:hover { background: rgba(255,255,255,0.04); }
.legend-item.dimmed { opacity: 0.25; }
.legend-swatch {
  width: 10px; height: 10px;
  border-radius: 2px;
  flex-shrink: 0;
}
.legend-swatch.star {
  clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
  width: 14px; height: 14px;
}
.legend-swatch.x-mark {
  background: transparent !important;
  position: relative;
  width: 12px; height: 12px;
}
.legend-swatch.x-mark::before,
.legend-swatch.x-mark::after {
  content: '';
  position: absolute;
  width: 14px; height: 2px;
  background: var(--grey);
  top: 50%; left: 50%;
}
.legend-swatch.x-mark::before { transform: translate(-50%,-50%) rotate(45deg); }
.legend-swatch.x-mark::after  { transform: translate(-50%,-50%) rotate(-45deg); }

/* ─── Chart Frame ─── */
.chart-frame {
  background: var(--bg-surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
  position: relative;
}

/* ─── SVG ─── */
svg text { font-family: 'DM Sans', sans-serif; }
.axis-label {
  font-size: 11px;
  fill: var(--text-3);
  font-family: 'JetBrains Mono', monospace;
}
.axis-title {
  font-size: 12px;
  fill: var(--text-2);
}
.quadrant-label {
  font-family: 'Space Grotesk', sans-serif;
  font-weight: 700;
  font-size: 18px;
  opacity: 1;
  pointer-events: none;
}
.team-label {
  font-family: 'JetBrains Mono', monospace;
  font-size: 9px;
  font-weight: 600;
  pointer-events: none;
  transition: opacity 0.3s;
}
.team-dot {
  cursor: pointer;
  transition: r 0.15s ease, filter 0.15s ease;
}
.team-dot:hover { filter: brightness(1.4); }
.threshold-line {
  stroke: var(--border-hi);
  stroke-width: 1;
  stroke-dasharray: 4,4;
}
.grid-line {
  stroke: var(--border);
  stroke-width: 0.5;
}
.zero-line {
  stroke: var(--border-hi);
  stroke-width: 1;
}

/* ─── Tooltip ─── */
.tooltip {
  position: fixed;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.15s, transform 0.15s;
  transform: translateY(4px);
  z-index: 999;
}
.tooltip.active {
  opacity: 1;
  transform: translateY(0);
}
.tooltip-inner {
  background: rgba(12,16,24,0.95);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1px solid var(--border-hi);
  border-radius: 10px;
  padding: 14px 16px;
  min-width: 220px;
  box-shadow: 0 12px 40px rgba(0,0,0,0.5);
}
.tooltip-team {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 16px;
  font-weight: 700;
  margin-bottom: 2px;
}
.tooltip-season {
  font-size: 12px;
  color: var(--text-2);
  margin-bottom: 10px;
}
.tooltip-badge {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 10px;
  font-weight: 700;
  letter-spacing: 1px;
  text-transform: uppercase;
  margin-bottom: 10px;
}
.tooltip-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 6px 16px;
}
.tooltip-stat-label {
  font-size: 10px;
  color: var(--text-3);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-family: 'JetBrains Mono', monospace;
}
.tooltip-stat-value {
  font-size: 14px;
  font-weight: 600;
  font-family: 'JetBrains Mono', monospace;
}

/* ─── Slider ─── */
.slider-area {
  padding: 16px 60px 10px;
  position: relative;
}
.season-label {
  text-align: center;
  font-family: 'JetBrains Mono', monospace;
  font-size: 15px;
  font-weight: 600;
  color: var(--cyan);
  margin-bottom: 12px;
  letter-spacing: 1px;
}
.slider-track-container {
  position: relative;
  height: 36px;
  display: flex;
  align-items: center;
}
.slider-track {
  position: absolute;
  left: 0; right: 0;
  height: 4px;
  background: var(--border);
  border-radius: 2px;
  top: 50%;
  transform: translateY(-50%);
}
.slider-track-fill {
  position: absolute;
  left: 0;
  height: 4px;
  background: linear-gradient(90deg, var(--cyan), #60a5fa);
  border-radius: 2px;
  top: 50%;
  transform: translateY(-50%);
  transition: width 0.2s;
}
input[type=range] {
  -webkit-appearance: none;
  appearance: none;
  width: 100%;
  height: 36px;
  background: transparent;
  position: relative;
  z-index: 2;
  cursor: pointer;
}
input[type=range]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 20px; height: 20px;
  border-radius: 50%;
  background: var(--cyan);
  box-shadow: 0 0 12px rgba(0,212,255,0.5), 0 2px 8px rgba(0,0,0,0.4);
  border: 2px solid var(--bg-deep);
  cursor: grab;
  transition: transform 0.15s, box-shadow 0.15s;
}
input[type=range]::-webkit-slider-thumb:hover {
  transform: scale(1.2);
  box-shadow: 0 0 20px rgba(0,212,255,0.7), 0 2px 8px rgba(0,0,0,0.4);
}
input[type=range]::-webkit-slider-thumb:active { cursor: grabbing; }
input[type=range]::-moz-range-thumb {
  width: 20px; height: 20px;
  border-radius: 50%;
  background: var(--cyan);
  box-shadow: 0 0 12px rgba(0,212,255,0.5);
  border: 2px solid var(--bg-deep);
  cursor: grab;
}
.slider-ticks {
  display: flex;
  justify-content: space-between;
  padding: 0;
  margin-top: 2px;
}
.slider-tick {
  font-family: 'JetBrains Mono', monospace;
  font-size: 9px;
  color: var(--text-3);
  cursor: pointer;
  padding: 2px 0;
  transition: color 0.2s;
  text-align: center;
  flex: 1;
}
.slider-tick:hover { color: var(--text-2); }
.slider-tick.active { color: var(--cyan); font-weight: 600; }

/* ─── Footer ─── */
.footer-note {
  text-align: center;
  color: var(--text-3);
  font-size: 11px;
  line-height: 1.7;
  padding: 14px 20px 0;
  max-width: 700px;
  margin: 0 auto;
}
.footer-note strong { color: var(--text-2); font-weight: 600; }

/* ─── Responsive ─── */
@media (max-width: 640px) {
  .viz-container { padding: 12px 10px 20px; }
  .viz-header h1 { font-size: 20px; }
  .legend-bar { gap: 10px; }
  .legend-item { font-size: 10px; padding: 3px 6px; }
  .slider-area { padding: 12px 20px 8px; }
  .slider-tick { font-size: 7px; }
  .season-label { font-size: 13px; }
  .tooltip-inner { min-width: 180px; padding: 10px 12px; }
}
</style>
</head>
<body>

<div class="viz-container">
  <!-- Header -->
  <div class="viz-header">
    <h1>NHL <span>Offensive Archetypes</span></h1>
    <div class="subtitle">404 team-seasons across 13 years. Scrub the timeline to travel through history.</div>
  </div>

  <!-- Legend -->
  <div class="legend-bar" id="legend"></div>

  <!-- Chart -->
  <div class="chart-frame">
    <svg id="chart"></svg>
    <div class="slider-area">
      <div class="season-label" id="seasonLabel">Season: 2025-26</div>
      <div class="slider-track-container">
        <div class="slider-track"></div>
        <div class="slider-track-fill" id="trackFill"></div>
        <input type="range" id="seasonSlider" min="0" max="12" value="12" step="1">
      </div>
      <div class="slider-ticks" id="sliderTicks"></div>
    </div>
  </div>

  <!-- Footer -->
  <div class="footer-note">
    Archetypes defined at <strong>±0.5 SD</strong> within each season.
    <strong>SNIPER</strong> is the unicorn — only 8 team-seasons in 13 years.
    <strong>SELECTIVE</strong> teams have the best per-shot quality but the worst outcomes.<br>
    Data: MoneyPuck.com · Beyond the Metric
  </div>
</div>

<!-- Tooltip -->
<div class="tooltip" id="tooltip">
  <div class="tooltip-inner">
    <div class="tooltip-team" id="ttTeam"></div>
    <div class="tooltip-season" id="ttSeason"></div>
    <div class="tooltip-badge" id="ttBadge"></div>
    <div class="tooltip-grid" id="ttGrid"></div>
  </div>
</div>

<script>
// =============================================================================
// DATA — [abbr, x, y, fullName, entropy, spg, gf, ga, xg]
// =============================================================================
const DATA = {"2013-14":{"SNIPER":[["BOS",-0.592,1.189,"Boston","0.7808","35.0","2.13","1.35","0.0554"]],"CHAOS":[["CAR",0.991,0.937,"Carolina","0.8051","34.4","1.66","1.85","0.0542"],["CHI",0.604,1.244,"Chicago","0.7991","35.2","2.23","1.80","0.0577"],["DAL",0.556,0.656,"Dallas","0.7984","33.7","1.93","1.82","0.0564"],["L.A",1.545,1.293,"Los Angeles","0.8135","35.3","1.61","1.27","0.0551"],["NYR",1.84,1.298,"NY Rangers","0.8181","35.3","1.74","1.60","0.0536"],["OTT",0.575,1.639,"Ottawa","0.7987","36.1","1.91","2.05","0.0490"],["S.J",0.631,1.985,"S.J","0.7995","37.0","1.96","1.72","0.0580"]],"SELECTIVE":[["BUF",-0.778,-1.938,"Buffalo","0.7779","27.3","1.17","2.01","0.0538"],["CGY",-0.756,-0.93,"Calgary","0.7783","29.8","1.66","2.12","0.0534"],["EDM",-1.491,-1.636,"Edmonton","0.7670","28.1","1.57","2.18","0.0590"],["MIN",-0.521,-1.34,"Minnesota","0.7819","28.8","1.65","1.44","0.0528"],["N.J",-2.009,-1.053,"N.J","0.7591","29.5","1.52","1.66","0.0603"],["TOR",-0.579,-1.058,"Toronto","0.7810","29.5","1.80","2.02","0.0566"],["WSH",-1.304,-0.821,"Washington","0.7699","30.1","1.66","1.87","0.0565"]],"LOST":[["MTL",0.57,-0.737,"Montreal","0.7986","30.3","1.63","1.67","0.0568"]],"NEUTRAL":[["ANA",0.955,0.271,"Anaheim","0.8045","32.8","2.32","1.66","0.0567"],["ARI",-0.055,0.157,"Arizona","0.7890","32.5","1.70","1.65","0.0500"],["CBJ",0.253,-0.698,"Columbus","0.7937","30.4","1.82","1.66","0.0514"],["COL",0.238,-0.461,"Colorado","0.7935","31.0","2.02","1.78","0.0569"],["DET",0.363,-0.332,"Detroit","0.7954","31.3","1.87","1.78","0.0541"],["FLA",0.47,0.34,"Florida","0.7971","32.9","1.74","2.16","0.0564"],["NSH",0.88,-0.154,"Nashville","0.8033","31.7","1.87","2.10","0.0556"],["NYI",-0.869,0.024,"NY Islanders","0.7766","32.2","1.72","2.10","0.0579"],["PHI",-0.075,-0.456,"Philadelphia","0.7887","31.0","1.76","1.84","0.0554"],["PIT",0.173,-0.683,"Pittsburgh","0.7925","30.4","1.87","1.79","0.0541"],["STL",0.091,0.068,"St. Louis","0.7913","32.3","1.91","1.56","0.0535"],["T.B",-2.386,0.384,"T.B","0.7533","33.0","1.85","1.59","0.0559"],["VAN",-0.539,0.434,"Vancouver","0.7816","33.2","1.70","1.77","0.0508"],["WPG",1.217,0.379,"Winnipeg","0.8085","33.0","1.87","1.99","0.0568"]]},"2014-15":{"SNIPER":[],"CHAOS":[["ANA",0.898,0.662,"Anaheim","0.8062","33.9","1.91","1.82","0.0540"],["CAR",0.674,0.952,"Carolina","0.8023","34.7","1.55","2.01","0.0535"],["CHI",0.677,1.241,"Chicago","0.8024","35.5","1.83","1.57","0.0564"],["L.A",1.732,1.316,"Los Angeles","0.8206","35.6","1.89","1.54","0.0527"],["NSH",1.124,0.933,"Nashville","0.8101","34.6","2.02","1.55","0.0533"]],"SELECTIVE":[["BUF",-1.343,-2.76,"Buffalo","0.7674","25.0","1.34","2.16","0.0576"],["CBJ",-0.876,-0.869,"Columbus","0.7755","29.9","1.76","2.05","0.0550"],["CGY",-1.836,-1.144,"Calgary","0.7589","29.2","1.88","1.88","0.0604"],["N.J",-2.525,-1.938,"N.J","0.7469","27.1","1.43","1.52","0.0568"],["TOR",-0.904,-0.514,"Toronto","0.7750","30.9","1.66","2.09","0.0557"]],"LOST":[],"NEUTRAL":[["ARI",0.739,-0.029,"Arizona","0.8034","32.1","1.29","2.15","0.0509"],["BOS",-0.219,0.476,"Boston","0.7868","33.5","1.71","1.68","0.0536"],["COL",-0.155,-1.453,"Colorado","0.7880","28.4","1.88","1.93","0.0570"],["DAL",0.36,1.307,"Dallas","0.7969","35.6","2.12","2.07","0.0574"],["DET",0.237,-0.757,"Detroit","0.7947","30.2","1.62","1.54","0.0545"],["EDM",-0.609,-0.257,"Edmonton","0.7801","31.5","1.60","2.41","0.0551"],["FLA",0.768,0.228,"Florida","0.8039","32.8","1.77","1.76","0.0541"],["MIN",0.379,0.284,"Minnesota","0.7972","33.0","2.01","1.79","0.0590"],["MTL",0.575,-0.491,"Montreal","0.8006","30.9","1.78","1.50","0.0554"],["NYI",0.114,1.755,"NY Islanders","0.7926","36.8","2.09","1.93","0.0603"],["NYR",1.509,0.443,"NY Rangers","0.8167","33.4","2.20","1.67","0.0593"],["OTT",0.265,-0.253,"Ottawa","0.7952","31.5","1.85","1.74","0.0545"],["PHI",0.076,-0.481,"Philadelphia","0.7919","31.0","1.65","1.65","0.0570"],["PIT",0.819,0.121,"Pittsburgh","0.8048","32.5","1.78","1.61","0.0562"],["S.J",-0.234,0.886,"S.J","0.7866","34.5","1.72","1.89","0.0584"],["STL",-0.291,0.485,"St. Louis","0.7856","33.5","1.96","1.63","0.0545"],["T.B",-1.88,0.223,"T.B","0.7581","32.8","2.21","1.67","0.0624"],["VAN",-0.196,-0.005,"Vancouver","0.7872","32.2","1.83","1.94","0.0533"],["WPG",0.727,-0.309,"Winnipeg","0.8032","31.4","1.78","1.50","0.0575"],["WSH",-0.604,-0.052,"Washington","0.7802","32.1","1.80","1.67","0.0591"]]},"2015-16":{"SNIPER":[["BOS",-0.544,0.602,"Boston","0.7815","33.4","1.95","1.84","0.0560"],["TOR",-0.708,0.774,"Toronto","0.7791","33.7","1.46","1.98","0.0585"],["WSH",-0.979,0.541,"Washington","0.7750","33.2","2.02","1.56","0.0594"]],"CHAOS":[["ANA",1.73,0.647,"Anaheim","0.8152","33.5","1.55","1.60","0.0518"],["CAR",0.949,0.597,"Carolina","0.8036","33.3","1.61","1.93","0.0595"],["DAL",1.021,1.879,"Dallas","0.8047","36.2","2.04","1.88","0.0568"],["L.A",1.706,2.389,"Los Angeles","0.8149","37.3","1.72","1.48","0.0534"],["NSH",1.201,0.591,"Nashville","0.8074","33.3","1.73","1.68","0.0511"]],"SELECTIVE":[["N.J",-0.951,-2.933,"N.J","0.7755","25.6","1.33","1.62","0.0603"],["VAN",-1.206,-0.99,"Vancouver","0.7717","29.9","1.51","1.88","0.0530"]],"LOST":[["COL",0.994,-1.207,"Colorado","0.8043","29.4","1.70","1.84","0.0543"]],"NEUTRAL":[["ARI",-0.368,-1.273,"Arizona","0.7841","29.2","1.62","1.71","0.0526"],["BUF",-0.47,-0.669,"Buffalo","0.7826","30.6","1.48","1.82","0.0531"],["CBJ",-0.878,-0.369,"Columbus","0.7765","31.2","1.83","1.96","0.0635"],["CGY",-0.447,-0.452,"Calgary","0.7829","31.0","1.85","2.06","0.0574"],["CHI",0.926,0.214,"Chicago","0.8033","32.5","1.63","1.73","0.0546"],["DET",0.534,-0.308,"Detroit","0.7975","31.4","1.59","1.68","0.0556"],["EDM",-0.235,-0.219,"Edmonton","0.7861","31.5","1.63","2.07","0.0592"],["FLA",0.104,-0.99,"Florida","0.7911","29.9","1.94","1.54","0.0579"],["MIN",-0.269,-0.563,"Minnesota","0.7856","30.8","1.71","1.57","0.0561"],["MTL",1.358,0.341,"Montreal","0.8097","32.8","1.79","1.85","0.0546"],["NYI",-1.052,0.308,"NY Islanders","0.7740","32.7","1.89","1.79","0.0561"],["NYR",1.064,-0.408,"NY Rangers","0.8053","31.1","1.99","1.57","0.0554"],["OTT",-0.028,-0.596,"Ottawa","0.7891","30.7","1.83","1.80","0.0582"],["PHI",0.188,0.081,"Philadelphia","0.7923","32.2","1.62","1.59","0.0558"],["PIT",0.424,1.157,"Pittsburgh","0.7958","34.6","1.95","1.59","0.0563"],["S.J",-2.128,0.403,"S.J","0.7580","32.9","1.83","1.63","0.0595"],["STL",0.212,0.452,"St. Louis","0.7927","33.0","1.70","1.51","0.0556"],["T.B",-1.717,0.047,"T.B","0.7641","32.1","1.80","1.52","0.0536"],["WPG",-0.432,-0.047,"Winnipeg","0.7832","31.9","1.76","1.77","0.0581"]]},"2016-17":{"SNIPER":[["S.J",-2.363,0.76,"S.J","0.7567","34.2","1.85","1.65","0.0586"],["TOR",-1.662,1.743,"Toronto","0.7672","35.9","2.06","1.96","0.0614"]],"CHAOS":[["CAR",0.824,0.753,"Carolina","0.8044","34.2","1.77","2.09","0.0618"],["DAL",1.252,0.819,"Dallas","0.8108","34.3","1.82","1.89","0.0592"],["L.A",1.449,1.655,"Los Angeles","0.8137","35.7","1.57","1.65","0.0561"],["MTL",0.979,0.982,"Montreal","0.8067","34.6","1.88","1.57","0.0570"],["NSH",1.074,0.819,"Nashville","0.8081","34.3","1.95","1.73","0.0540"],["PIT",1.015,1.255,"Pittsburgh","0.8073","35.0","2.26","1.83","0.0631"]],"SELECTIVE":[["CGY",-0.796,-1.155,"Calgary","0.7801","31.1","1.72","1.76","0.0571"],["N.J",-0.58,-1.702,"N.J","0.7834","30.2","1.39","1.82","0.0580"],["STL",-0.648,-1.192,"St. Louis","0.7823","31.0","1.89","1.68","0.0548"],["VAN",-0.816,-1.614,"Vancouver","0.7798","30.3","1.56","1.94","0.0583"],["WPG",-1.03,-1.118,"Winnipeg","0.7766","31.1","1.91","2.04","0.0590"]],"LOST":[["DET",0.66,-1.17,"Detroit","0.8019","31.0","1.76","1.98","0.0557"],["OTT",0.784,-0.652,"Ottawa","0.8038","31.9","1.65","1.72","0.0563"]],"NEUTRAL":[["ANA",1.287,-0.423,"Anaheim","0.8113","32.3","1.77","1.56","0.0570"],["ARI",-0.371,-1.044,"Arizona","0.7865","31.3","1.62","2.05","0.0540"],["BOS",-0.059,1.825,"Boston","0.7912","36.0","1.73","1.79","0.0551"],["BUF",0.906,-0.216,"Buffalo","0.8056","32.6","1.54","1.90","0.0559"],["CBJ",0.177,0.501,"Columbus","0.7947","33.8","2.05","1.62","0.0592"],["CHI",0.605,0.057,"Chicago","0.8011","33.1","2.02","1.68","0.0586"],["COL",-0.367,-1.259,"Colorado","0.7866","30.9","1.39","2.37","0.0507"],["EDM",0.062,0.264,"Edmonton","0.7930","33.4","2.02","1.71","0.0608"],["FLA",-0.191,0.087,"Florida","0.7892","33.1","1.59","1.95","0.0532"],["MIN",0.023,0.479,"Minnesota","0.7924","33.8","2.28","1.80","0.0603"],["NYI",-1.503,0.08,"NY Islanders","0.7695","33.1","2.17","2.07","0.0593"],["NYR",1.334,-0.261,"NY Rangers","0.8120","32.5","2.04","1.88","0.0576"],["PHI",-0.234,-0.135,"Philadelphia","0.7885","32.8","1.56","1.88","0.0559"],["T.B",-1.101,-0.076,"T.B","0.7756","32.9","1.72","1.77","0.0606"],["WSH",-0.708,-0.061,"Washington","0.7815","32.9","2.17","1.38","0.0578"]]},"2017-18":{"SNIPER":[["S.J",-1.817,0.856,"S.J","0.7597","36.2","1.94","2.02","0.0582"],["T.B",-1.968,0.59,"T.B","0.7571","35.7","2.39","1.78","0.0608"],["TOR",-1.955,0.608,"Toronto","0.7573","35.7","2.28","1.93","0.0629"]],"CHAOS":[["CAR",1.291,1.762,"Carolina","0.8141","38.0","1.89","2.18","0.0558"],["CBJ",0.585,1.712,"Columbus","0.8018","37.9","2.06","1.82","0.0576"],["FLA",0.961,0.844,"Florida","0.8083","36.2","2.04","2.05","0.0557"]],"SELECTIVE":[["COL",-1.104,-1.861,"Colorado","0.7722","30.9","1.85","1.71","0.0530"],["NYI",-1.993,-0.583,"NY Islanders","0.7567","33.4","2.16","2.32","0.0557"],["PHI",-0.862,-0.577,"Philadelphia","0.7765","33.4","1.93","1.77","0.0602"],["VAN",-1.019,-1.166,"Vancouver","0.7737","32.2","1.68","1.99","0.0552"]],"LOST":[["L.A",0.805,-0.564,"Los Angeles","0.8056","33.4","1.89","1.63","0.0542"],["NYR",1.021,-0.868,"NY Rangers","0.8094","32.8","1.83","2.22","0.0597"],["OTT",1.218,-0.688,"Ottawa","0.8128","33.2","1.85","2.41","0.0519"]],"NEUTRAL":[["ANA",1.188,-0.477,"Anaheim","0.8123","33.6","1.91","1.67","0.0549"],["ARI",0.38,-0.626,"Arizona","0.7982","33.3","1.71","2.01","0.0559"],["BOS",0.326,0.732,"Boston","0.7972","36.0","2.02","1.68","0.0586"],["BUF",0.27,-1.414,"Buffalo","0.7963","31.7","1.45","2.15","0.0515"],["CGY",0.324,1.843,"Calgary","0.7972","38.1","1.79","1.93","0.0567"],["CHI",-0.392,0.757,"Chicago","0.7847","36.0","1.91","2.12","0.0561"],["DAL",-0.361,-0.924,"Dallas","0.7852","32.7","1.80","1.65","0.0589"],["DET",0.046,-0.521,"Detroit","0.7923","33.5","1.80","2.04","0.0544"],["EDM",0.196,1.284,"Edmonton","0.7950","37.0","1.99","2.15","0.0587"],["MIN",-0.008,-1.389,"Minnesota","0.7914","31.8","1.94","1.77","0.0600"],["MTL",0.229,-0.031,"Montreal","0.7955","34.5","1.59","1.93","0.0586"],["N.J",0.905,-0.378,"N.J","0.8074","33.8","1.95","2.04","0.0589"],["NSH",0.679,0.168,"Nashville","0.8034","34.8","2.05","1.56","0.0556"],["PIT",0.489,1.154,"Pittsburgh","0.8001","36.8","1.96","2.15","0.0579"],["STL",0.99,0.385,"St. Louis","0.8088","35.3","1.83","1.68","0.0524"],["VGK",0.269,0.341,"Vegas","0.7962","35.2","2.15","1.91","0.0562"],["WPG",-1.015,0.106,"Winnipeg","0.7738","34.7","2.15","1.76","0.0562"],["WSH",0.322,-1.073,"Washington","0.7972","32.4","2.09","1.88","0.0591"]]},"2018-19":{"SNIPER":[["S.J",-1.309,1.141,"S.J","0.7689","36.9","2.39","2.28","0.0596"]],"CHAOS":[["CAR",1.032,2.233,"Carolina","0.8112","39.2","1.99","1.82","0.0608"],["NSH",0.669,0.735,"Nashville","0.8046","36.0","2.01","1.72","0.0557"]],"SELECTIVE":[["COL",-0.751,-0.533,"Colorado","0.7790","33.3","1.96","1.88","0.0571"],["NYI",-3.059,-1.164,"NY Islanders","0.7374","31.9","1.99","1.57","0.0618"]],"LOST":[["ANA",0.87,-0.871,"Anaheim","0.8082","32.5","1.66","1.89","0.0520"],["L.A",0.606,-0.854,"Los Angeles","0.8035","32.6","1.72","2.09","0.0576"],["OTT",1.221,-0.612,"Ottawa","0.8146","33.1","2.10","2.67","0.0594"]],"NEUTRAL":[["ARI",0.964,-0.409,"Arizona","0.8099","33.5","1.60","1.90","0.0571"],["BOS",-0.423,0.729,"Boston","0.7849","36.0","1.91","1.60","0.0552"],["BUF",-0.222,0.51,"Buffalo","0.7885","35.5","1.89","2.27","0.0546"],["CBJ",-0.439,0.498,"Columbus","0.7846","35.5","2.29","2.07","0.0605"],["CGY",0.19,0.464,"Calgary","0.7960","35.4","2.30","1.83","0.0602"],["CHI",-0.653,-0.093,"Chicago","0.7808","34.2","2.24","2.28","0.0564"],["DAL",0.288,-0.888,"Dallas","0.7977","32.5","1.66","1.63","0.0585"],["DET",0.386,-1.214,"Detroit","0.7995","31.8","1.80","2.20","0.0574"],["EDM",-0.07,-1.085,"Edmonton","0.7913","32.1","1.79","2.18","0.0588"],["FLA",0.959,-0.144,"Florida","0.8099","34.1","2.02","2.35","0.0537"],["MIN",1.363,0.183,"Minnesota","0.8171","34.8","1.72","1.94","0.0578"],["MTL",0.371,1.8,"Montreal","0.7992","38.3","2.33","2.01","0.0558"],["N.J",0.366,-1.051,"N.J","0.7991","32.1","1.79","2.26","0.0574"],["NYR",0.493,-1.445,"NY Rangers","0.8014","31.3","1.77","2.11","0.0579"],["PHI",0.244,-0.471,"Philadelphia","0.7969","33.4","2.01","2.34","0.0596"],["PIT",0.178,0.763,"Pittsburgh","0.7957","36.1","2.23","1.82","0.0590"],["STL",-0.196,-0.251,"St. Louis","0.7890","33.9","2.02","1.79","0.0592"],["T.B",-2.884,0.234,"T.B","0.7405","34.9","2.51","1.91","0.0627"],["TOR",-0.012,2.042,"Toronto","0.7923","38.8","2.54","2.13","0.0585"],["VAN",-0.122,-1.011,"Vancouver","0.7903","32.2","1.77","2.12","0.0536"],["VGK",0.291,1.411,"Vegas","0.7978","37.5","2.13","2.00","0.0641"],["WPG",-0.554,-0.358,"Winnipeg","0.7826","33.6","2.07","1.99","0.0551"],["WSH",0.201,-0.29,"Washington","0.7962","33.8","2.41","2.00","0.0570"]]},"2019-20":{"SNIPER":[["CGY",-0.919,0.727,"Calgary","0.7789","35.2","1.90","2.11","0.0575"]],"CHAOS":[["L.A",0.993,1.774,"Los Angeles","0.8137","37.3","1.69","2.01","0.0545"],["MTL",0.799,1.97,"Montreal","0.8102","37.7","2.08","2.07","0.0601"],["NSH",1.164,1.173,"Nashville","0.8168","36.1","2.23","1.99","0.0542"]],"SELECTIVE":[["N.J",-1.139,-1.082,"N.J","0.7749","31.6","1.81","2.28","0.0609"],["NYI",-1.619,-0.87,"NY Islanders","0.7662","32.0","1.90","1.99","0.0585"],["S.J",-1.377,-0.792,"S.J","0.7706","32.2","1.77","2.33","0.0597"],["STL",-0.68,-0.886,"St. Louis","0.7833","32.0","2.13","1.69","0.0574"]],"LOST":[["EDM",0.745,-0.737,"Edmonton","0.8092","32.3","2.03","2.21","0.0584"],["NYR",1.229,-0.592,"NY Rangers","0.8180","32.6","2.13","2.04","0.0559"]],"NEUTRAL":[["ANA",0.998,-0.059,"Anaheim","0.8138","33.7","1.83","2.08","0.0520"],["ARI",0.801,0.376,"Arizona","0.8102","34.5","1.89","1.84","0.0585"],["BOS",0.326,-0.398,"Boston","0.8016","33.0","2.01","1.53","0.0553"],["BUF",-0.256,-0.987,"Buffalo","0.7910","31.8","1.90","1.93","0.0546"],["CAR",-0.22,1.041,"Carolina","0.7916","35.9","2.07","2.01","0.0590"],["CBJ",0.604,0.419,"Columbus","0.8066","34.6","1.80","1.76","0.0549"],["CHI",0.138,-0.326,"Chicago","0.7981","33.1","2.10","2.11","0.0590"],["COL",-0.597,0.262,"Colorado","0.7848","34.3","2.33","1.64","0.0543"],["DAL",-0.031,-0.944,"Dallas","0.7951","31.9","1.58","1.59","0.0605"],["DET",-0.232,-2.299,"Detroit","0.7914","29.2","1.30","2.39","0.0560"],["FLA",0.526,0.06,"Florida","0.8052","33.9","2.33","2.28","0.0576"],["MIN",0.855,-0.369,"Minnesota","0.8112","33.0","2.29","2.03","0.0592"],["OTT",0.878,0.21,"Ottawa","0.8116","34.2","1.82","2.20","0.0598"],["PHI",-0.017,-0.616,"Philadelphia","0.7953","32.6","2.23","1.94","0.0627"],["PIT",0.09,-0.122,"Pittsburgh","0.7973","33.5","2.20","2.01","0.0560"],["T.B",-2.839,-0.276,"T.B","0.7440","33.2","2.27","1.73","0.0631"],["TOR",0.051,1.652,"Toronto","0.7966","37.1","2.31","2.29","0.0583"],["VAN",0.029,-0.274,"Vancouver","0.7962","33.2","2.06","2.10","0.0586"],["VGK",0.355,2.104,"Vegas","0.8021","38.0","2.13","2.04","0.0613"],["WPG",-1.907,-0.228,"Winnipeg","0.7610","33.3","1.93","2.00","0.0541"],["WSH",1.254,0.089,"Washington","0.8184","34.0","2.29","2.07","0.0586"]]},"2020-21":{"SNIPER":[["TOR",-1.354,0.616,"Toronto","0.7670","33.7","2.38","1.71","0.0714"]],"CHAOS":[["BOS",1.132,1.818,"Boston","0.8062","36.2","1.91","1.68","0.0507"],["CAR",2.089,1.504,"Carolina","0.8212","35.5","1.89","1.45","0.0596"],["NSH",0.899,0.59,"Nashville","0.8025","33.7","1.86","1.62","0.0552"],["VGK",0.655,1.443,"Vegas","0.7986","35.4","2.41","1.75","0.0625"]],"SELECTIVE":[["CHI",-0.541,-1.798,"Chicago","0.7798","28.8","1.79","2.23","0.0560"],["WPG",-1.604,-0.691,"Winnipeg","0.7630","31.0","1.96","1.82","0.0595"]],"LOST":[["ANA",1.335,-0.656,"Anaheim","0.8094","31.1","1.79","2.18","0.0535"],["ARI",1.396,-0.674,"Arizona","0.8103","31.1","1.79","2.05","0.0564"],["DET",0.678,-1.815,"Detroit","0.7990","28.7","1.55","2.00","0.0558"],["L.A",0.957,-0.743,"Los Angeles","0.8034","30.9","1.70","2.12","0.0531"],["MIN",0.868,-1.101,"Minnesota","0.8020","30.2","2.25","1.93","0.0629"],["NYR",1.087,-1.083,"NY Rangers","0.8054","30.2","2.07","1.89","0.0561"]],"NEUTRAL":[["BUF",-0.712,-0.273,"Buffalo","0.7771","31.9","1.55","2.45","0.0570"],["CBJ",0.379,-0.125,"Columbus","0.7943","32.2","1.73","2.34","0.0538"],["CGY",-0.796,0.415,"Calgary","0.7758","33.3","2.00","1.88","0.0578"],["COL",-0.054,2.123,"Colorado","0.7875","36.8","2.34","1.57","0.0578"],["DAL",0.063,0.259,"Dallas","0.7893","33.0","1.80","1.66","0.0543"],["EDM",-0.009,-0.343,"Edmonton","0.7882","31.8","2.05","2.09","0.0629"],["FLA",0.414,1.156,"Florida","0.7948","34.8","2.11","1.68","0.0565"],["MTL",-0.367,1.26,"Montreal","0.7825","35.0","1.89","1.84","0.0584"],["N.J",-2.353,0.285,"N.J","0.7513","33.0","1.82","2.20","0.0582"],["NYI",-0.795,-0.299,"NY Islanders","0.7758","31.8","2.02","1.62","0.0592"],["OTT",-0.618,0.468,"Ottawa","0.7786","33.4","1.89","2.36","0.0553"],["PHI",0.506,0.137,"Philadelphia","0.7963","32.7","1.93","2.39","0.0579"],["PIT",-0.878,-0.194,"Pittsburgh","0.7745","32.1","2.27","1.79","0.0574"],["S.J",-0.348,-0.09,"S.J","0.7828","32.3","1.88","2.39","0.0595"],["STL",-0.011,-1.466,"St. Louis","0.7881","29.4","1.82","1.96","0.0529"],["T.B",-0.887,-0.282,"T.B","0.7743","31.9","1.98","1.73","0.0590"],["VAN",-1.139,-0.482,"Vancouver","0.7704","31.5","1.86","2.34","0.0580"],["WSH",0.012,0.041,"Washington","0.7885","32.5","2.36","1.91","0.0582"]]},"2021-22":{"SNIPER":[["NJD",-0.803,0.633,"New Jersey","0.7908","35.8","2.23","2.65","0.0621"]],"CHAOS":[["BOS",1.396,1.227,"Boston","0.8187","37.5","2.10","1.77","0.0574"],["CAR",0.791,1.627,"Carolina","0.8110","38.7","2.38","1.72","0.0626"],["LAK",2.215,1.256,"Los Angeles","0.8290","37.6","1.91","1.87","0.0605"],["PIT",0.855,1.029,"Pittsburgh","0.8118","37.0","2.20","1.88","0.0607"],["VGK",0.66,1.328,"Vegas","0.8094","37.8","2.24","2.02","0.0614"]],"SELECTIVE":[["BUF",-1.765,-0.648,"Buffalo","0.7787","32.1","1.91","2.43","0.0557"],["CHI",-0.86,-1.474,"Chicago","0.7901","29.7","1.76","2.34","0.0548"],["NYI",-1.601,-1.04,"NY Islanders","0.7807","31.0","1.95","1.96","0.0593"],["SJS",-0.676,-0.754,"San Jose","0.7924","31.8","1.73","2.18","0.0609"],["STL",-1.817,-0.88,"St. Louis","0.7780","31.4","2.44","2.07","0.0643"]],"LOST":[["MTL",1.245,-1.045,"Montreal","0.8168","31.0","1.89","2.39","0.0610"],["PHI",0.651,-0.632,"Philadelphia","0.8092","32.1","1.95","2.33","0.0628"]],"NEUTRAL":[["ANA",1.239,-0.387,"Anaheim","0.8167","32.9","1.90","2.29","0.0574"],["ARI",-0.296,-1.664,"Arizona","0.7973","29.2","1.91","2.71","0.0574"],["CBJ",0.807,-0.269,"Columbus","0.8112","33.2","2.16","2.62","0.0598"],["CGY",0.165,1.766,"Calgary","0.8031","39.1","2.41","1.70","0.0557"],["COL",0.04,0.586,"Colorado","0.8015","35.7","2.41","1.87","0.0597"],["DAL",0.048,-0.337,"Dallas","0.8016","33.0","1.79","1.94","0.0629"],["DET",-0.05,-1.179,"Detroit","0.8004","30.6","1.94","2.50","0.0644"],["EDM",0.257,0.62,"Edmonton","0.8043","35.8","2.21","2.11","0.0634"],["FLA",0.499,1.846,"Florida","0.8073","39.3","2.66","1.98","0.0671"],["MIN",0.183,-0.172,"Minnesota","0.8033","33.5","2.52","1.84","0.0591"],["NSH",-1.395,-0.48,"Nashville","0.7834","32.6","2.01","1.91","0.0596"],["NYR",0.404,-1.137,"NY Rangers","0.8061","30.7","1.94","1.80","0.0589"],["OTT",-0.303,-0.493,"Ottawa","0.7972","32.5","1.79","2.15","0.0617"],["SEA",-0.397,-0.632,"Seattle","0.7960","32.1","1.85","2.30","0.0560"],["TBL",-0.42,-0.214,"Tampa Bay","0.7957","33.4","2.24","1.83","0.0652"],["TOR",-0.19,1.227,"Toronto","0.7986","37.5","2.56","2.22","0.0663"],["VAN",-0.089,0.043,"Vancouver","0.7999","34.1","1.91","1.74","0.0572"],["WPG",-1.811,0.194,"Winnipeg","0.7781","34.5","1.91","1.98","0.0637"],["WSH",1.02,0.056,"Washington","0.8139","34.1","2.17","1.93","0.0566"]]},"2022-23":{"SNIPER":[],"CHAOS":[["CAR",1.159,2.347,"Carolina","0.8290","40.7","2.12","1.71","0.0618"],["CGY",1.188,1.847,"Calgary","0.8293","39.2","2.22","2.06","0.0594"],["FLA",1.305,1.38,"Florida","0.8307","37.9","2.34","1.95","0.0649"],["NJD",1.392,1.578,"New Jersey","0.8318","38.4","2.40","1.88","0.0663"]],"SELECTIVE":[["ARI",-0.87,-1.797,"Arizona","0.8044","28.6","1.84","2.20","0.0655"],["CBJ",-0.922,-0.645,"Columbus","0.8037","32.0","1.76","2.82","0.0624"],["NSH",-1.793,-0.683,"Nashville","0.7932","31.9","1.78","1.87","0.0698"],["STL",-1.073,-0.948,"St. Louis","0.8019","31.1","2.21","2.29","0.0612"],["VAN",-1.51,-1.078,"Vancouver","0.7966","30.7","2.06","2.37","0.0621"]],"LOST":[["ANA",1.535,-1.309,"Anaheim","0.8335","30.0","1.74","2.74","0.0603"],["CHI",1.045,-1.536,"Chicago","0.8276","29.4","1.65","2.54","0.0616"]],"NEUTRAL":[["BOS",0.42,0.052,"Boston","0.8200","34.0","2.43","1.39","0.0675"],["BUF",-0.219,0.431,"Buffalo","0.8122","35.1","2.40","2.49","0.0639"],["COL",-1.069,0.258,"Colorado","0.8020","34.6","2.12","1.77","0.0619"],["DAL",-0.814,0.056,"Dallas","0.8050","34.0","2.13","1.77","0.0622"],["DET",-0.175,-1.578,"Detroit","0.8128","29.3","1.78","2.24","0.0595"],["EDM",-0.21,0.283,"Edmonton","0.8124","34.7","2.34","2.06","0.0682"],["LAK",-0.378,0.452,"Los Angeles","0.8103","35.2","2.07","1.95","0.0616"],["MIN",0.123,-0.221,"Minnesota","0.8164","33.2","1.76","1.72","0.0602"],["MTL",0.314,-1.436,"Montreal","0.8187","29.7","1.98","2.45","0.0645"],["NYI",-0.876,0.246,"NY Islanders","0.8043","34.6","2.16","1.77","0.0631"],["NYR",1.008,-0.204,"NY Rangers","0.8271","33.3","2.22","1.87","0.0602"],["OTT",1.229,0.283,"Ottawa","0.8298","34.7","1.84","2.16","0.0643"],["PHI",0.39,-0.284,"Philadelphia","0.8196","33.0","1.87","2.12","0.0615"],["PIT",0.484,1.204,"Pittsburgh","0.8208","37.3","2.05","2.10","0.0663"],["SEA",0.851,0.485,"Seattle","0.8252","35.3","2.55","1.96","0.0611"],["SJS",0.735,-0.288,"San Jose","0.8238","33.0","2.06","2.71","0.0692"],["TBL",-1.248,0.25,"Tampa Bay","0.7998","34.6","2.13","1.98","0.0663"],["TOR",-1.428,0.325,"Toronto","0.7976","34.8","2.26","1.73","0.0690"],["VGK",-0.653,0.195,"Vegas","0.8070","34.4","2.28","1.94","0.0667"],["WPG",-0.856,0.166,"Winnipeg","0.8045","34.3","1.94","1.79","0.0641"],["WSH",0.917,0.17,"Washington","0.8260","34.3","2.12","2.23","0.0630"]]},"2023-24":{"SNIPER":[["COL",-1.248,0.703,"Colorado","0.8346","35.9","2.39","2.04","0.0631"]],"CHAOS":[["CAR",0.54,2.512,"Carolina","0.8526","40.7","2.09","1.78","0.0565"],["DAL",0.532,1.056,"Dallas","0.8525","36.9","2.34","1.95","0.0593"],["EDM",1.709,1.44,"Edmonton","0.8644","37.9","2.35","1.87","0.0692"],["LAK",1.553,1.147,"Los Angeles","0.8628","37.1","2.01","1.74","0.0604"],["NSH",0.783,0.625,"Nashville","0.8550","35.7","2.05","1.87","0.0626"],["PHI",1.491,0.836,"Philadelphia","0.8622","36.3","1.95","2.20","0.0570"],["PIT",1.752,0.969,"Pittsburgh","0.8648","36.6","2.18","2.13","0.0622"],["TOR",0.656,0.689,"Toronto","0.8538","35.9","2.44","2.05","0.0628"]],"SELECTIVE":[["ANA",-0.759,-1.678,"Anaheim","0.8395","29.6","1.56","2.12","0.0600"],["CHI",-1.652,-1.842,"Chicago","0.8305","29.1","1.44","2.46","0.0594"],["MIN",-0.559,-0.73,"Minnesota","0.8415","32.1","1.94","1.99","0.0578"],["MTL",-0.614,-1.087,"Montreal","0.8410","31.2","1.96","2.02","0.0614"],["SJS",-1.424,-1.348,"San Jose","0.8328","30.5","1.45","2.76","0.0581"],["STL",-0.676,-1.11,"St. Louis","0.8404","31.1","1.84","2.06","0.0586"],["TBL",-1.182,-0.515,"Tampa Bay","0.8353","32.7","2.09","2.33","0.0615"],["VAN",-1.547,-0.597,"Vancouver","0.8316","32.5","2.29","1.66","0.0631"],["WSH",-1.01,-1.252,"Washington","0.8370","30.7","1.74","2.13","0.0634"]],"LOST":[],"NEUTRAL":[["ARI",-0.123,-0.661,"Arizona","0.8459","32.3","2.10","2.09","0.0612"],["BOS",0.216,-0.968,"Boston","0.8493","31.5","2.12","1.65","0.0645"],["BUF",-0.14,0.181,"Buffalo","0.8458","34.5","2.12","1.94","0.0595"],["CBJ",0.673,0.154,"Columbus","0.8539","34.5","2.13","2.39","0.0584"],["CGY",-0.117,0.593,"Calgary","0.8460","35.6","2.04","2.21","0.0565"],["DET",0.354,-1.174,"Detroit","0.8507","30.9","2.17","2.30","0.0578"],["FLA",0.115,0.474,"Florida","0.8483","35.3","1.89","1.46","0.0587"],["NJD",0.926,0.218,"New Jersey","0.8565","34.6","2.16","2.26","0.0653"],["NYI",1.199,0.236,"NY Islanders","0.8592","34.7","2.02","1.93","0.0601"],["NYR",-0.815,0.328,"NY Rangers","0.8390","34.9","2.04","2.01","0.0568"],["OTT",0.825,0.241,"Ottawa","0.8555","34.7","1.99","2.34","0.0566"],["SEA",-0.854,-0.121,"Seattle","0.8386","33.7","1.76","1.79","0.0566"],["VGK",-0.88,0.09,"Vegas","0.8383","34.3","2.16","1.99","0.0627"],["WPG",0.275,0.593,"Winnipeg","0.8499","35.6","2.17","1.48","0.0580"]]},"2024-25":{"SNIPER":[["COL",-0.753,0.818,"Colorado","0.8357","35.9","2.06","1.90","0.0580"],["LAK",-0.707,0.945,"Los Angeles","0.8361","36.2","2.18","1.52","0.0596"]],"CHAOS":[["CAR",0.854,2.617,"Carolina","0.8510","40.0","2.17","2.06","0.0609"],["EDM",1.08,1.532,"Edmonton","0.8532","37.5","2.09","2.10","0.0610"],["FLA",0.602,1.405,"Florida","0.8486","37.2","1.91","1.74","0.0580"],["NYI",0.616,0.733,"NY Islanders","0.8487","35.7","1.99","2.01","0.0599"],["VGK",0.957,1.299,"Vegas","0.8520","37.0","2.26","1.89","0.0624"]],"SELECTIVE":[["CHI",-1.181,-2.061,"Chicago","0.8316","29.2","1.83","2.52","0.0595"],["MTL",-1.556,-1.183,"Montreal","0.8280","31.3","1.95","2.24","0.0648"],["SJS",-0.54,-1.183,"San Jose","0.8377","31.3","1.74","2.51","0.0588"],["STL",-1.224,-1.162,"St. Louis","0.8312","31.3","2.13","1.82","0.0607"],["VAN",-1.397,-1.315,"Vancouver","0.8295","31.0","1.88","2.00","0.0577"]],"LOST":[["BOS",0.656,-1.437,"Boston","0.8491","30.7","1.87","2.02","0.0608"]],"NEUTRAL":[["ANA",0.671,-0.421,"Anaheim","0.8492","33.0","1.90","2.00","0.0577"],["BUF",-0.398,-0.283,"Buffalo","0.8391","33.3","2.26","2.28","0.0577"],["CBJ",1.968,0.336,"Columbus","0.8616","34.8","2.48","2.26","0.0609"],["CGY",0.227,0.68,"Calgary","0.8450","35.6","1.71","1.74","0.0547"],["DAL",-0.718,-0.426,"Dallas","0.8360","33.0","2.22","1.91","0.0660"],["DET",0.445,-0.606,"Detroit","0.8471","32.6","1.76","1.98","0.0606"],["MIN",-0.114,-0.421,"Minnesota","0.8418","33.0","1.73","1.82","0.0564"],["NJD",1.314,-0.288,"New Jersey","0.8554","33.3","1.83","1.88","0.0632"],["NSH",0.195,-0.251,"Nashville","0.8447","33.4","1.60","2.33","0.0601"],["NYR",0.001,0.13,"NY Rangers","0.8429","34.3","2.22","2.11","0.0609"],["OTT",-0.222,-0.368,"Ottawa","0.8407","33.1","1.76","1.93","0.0585"],["PHI",1.026,-0.479,"Philadelphia","0.8526","32.9","2.05","2.43","0.0649"],["PIT",1.894,0.4,"Pittsburgh","0.8609","34.9","1.94","2.41","0.0603"],["SEA",-0.792,-0.093,"Seattle","0.8353","33.8","2.05","2.23","0.0558"],["TBL",-0.279,0.024,"Tampa Bay","0.8402","34.0","2.35","1.74","0.0635"],["TOR",0.145,-0.611,"Toronto","0.8442","32.6","2.10","1.70","0.0599"],["UTA",-0.378,0.95,"Utah","0.8393","36.2","1.93","1.84","0.0623"],["WPG",0.019,0.537,"Winnipeg","0.8430","35.2","2.09","1.45","0.0614"],["WSH",-2.411,0.183,"Washington","0.8199","34.4","2.34","1.96","0.0649"]]},"2025-26":{"SNIPER":[["COL",-0.644,2.438,"Colorado","0.8251","39.9","2.84","1.60","0.0624"],["WSH",-0.551,0.54,"Washington","0.8264","34.7","2.22","1.83","0.0627"]],"CHAOS":[["ANA",1.102,1.405,"Anaheim","0.8492","37.0","2.09","2.36","0.0580"],["CAR",0.681,2.504,"Carolina","0.8434","40.1","2.21","1.86","0.0611"],["CBJ",1.208,0.852,"Columbus","0.8506","35.5","2.29","2.09","0.0607"],["EDM",0.922,0.563,"Edmonton","0.8467","34.7","2.05","2.31","0.0641"],["NJD",1.406,0.554,"New Jersey","0.8534","34.7","1.60","2.25","0.0563"]],"SELECTIVE":[["CHI",-0.81,-0.909,"Chicago","0.8229","30.7","1.86","2.37","0.0585"],["DAL",-2.6,-1.855,"Dallas","0.7982","28.1","2.07","1.75","0.0680"],["NYR",-1.249,-0.73,"NY Rangers","0.8168","31.2","1.67","2.00","0.0591"],["PHI",-0.891,-1.152,"Philadelphia","0.8217","30.0","2.02","2.09","0.0616"],["SJS",-2.125,-2.119,"San Jose","0.8047","27.4","1.96","2.27","0.0646"],["STL",-1.294,-1.024,"St. Louis","0.8162","30.4","1.84","2.40","0.0629"],["WPG",-1.403,-0.644,"Winnipeg","0.8147","31.4","2.02","2.05","0.0609"]],"LOST":[],"NEUTRAL":[["BOS",0.005,-0.264,"Boston","0.8341","32.5","2.26","1.88","0.0581"],["BUF",0.011,-0.078,"Buffalo","0.8342","33.0","2.26","2.14","0.0615"],["CGY",0.895,0.305,"Calgary","0.8463","34.0","1.64","2.09","0.0582"],["DET",0.977,0.267,"Detroit","0.8475","33.9","1.71","1.95","0.0579"],["FLA",0.469,-0.174,"Florida","0.8405","32.7","1.93","2.18","0.0595"],["LAK",-0.159,0.325,"Los Angeles","0.8318","34.1","1.64","1.57","0.0560"],["MIN",0.597,0.286,"Minnesota","0.8422","34.0","2.02","1.88","0.0600"],["MTL",0.337,-0.685,"Montreal","0.8386","31.3","2.28","2.07","0.0614"],["NSH",0.838,0.299,"Nashville","0.8455","34.0","1.82","2.33","0.0617"],["NYI",0.57,-0.474,"NY Islanders","0.8419","31.9","1.86","1.76","0.0602"],["OTT",1.156,0.05,"Ottawa","0.8499","33.3","2.25","2.09","0.0605"],["PIT",0.284,0.735,"Pittsburgh","0.8379","35.2","2.30","2.02","0.0634"],["SEA",-0.002,-1.028,"Seattle","0.8340","30.4","1.82","1.64","0.0562"],["TBL",-0.885,0.04,"Tampa Bay","0.8218","33.3","2.38","1.65","0.0640"],["TOR",-0.216,-0.212,"Toronto","0.8310","32.6","2.30","2.49","0.0603"],["UTA",0.53,0.363,"Utah","0.8413","34.2","2.32","1.89","0.0637"],["VAN",0.48,-0.257,"Vancouver","0.8406","32.5","1.65","2.30","0.0580"],["VGK",0.363,0.082,"Vegas","0.8390","33.4","2.21","2.18","0.0616"]]}};

// =============================================================================
// CONFIG
// =============================================================================
const SEASONS = Object.keys(DATA).sort();
const ARCH_CFG = {
  SNIPER:    { color:'#00d4ff', bg:'rgba(0,212,255,0.15)',  glow:'0 0 14px rgba(0,212,255,0.6)',  label:'SNIPER',    shape:'star',   r:7  },
  CHAOS:     { color:'#FFB347', bg:'rgba(255,179,71,0.15)', glow:'0 0 14px rgba(255,179,71,0.6)', label:'CHAOS',     shape:'circle', r:6  },
  SELECTIVE: { color:'#e74c3c', bg:'rgba(231,76,60,0.15)',  glow:'0 0 14px rgba(231,76,60,0.6)',  label:'SELECTIVE', shape:'square', r:6  },
  LOST:      { color:'#6b7a8d', bg:'rgba(107,122,141,0.12)',glow:'0 0 14px rgba(107,122,141,0.6)',label:'LOST',      shape:'x',      r:6  },
  NEUTRAL:   { color:'#4a5a6d', bg:'rgba(74,90,109,0.06)', glow:'0 0 10px rgba(74,90,109,0.4)', label:'NEUTRAL',   shape:'dot',    r:4  },
};
const ARCH_ORDER = ['SNIPER','CHAOS','SELECTIVE','LOST','NEUTRAL'];

// =============================================================================
// DIMENSIONS
// =============================================================================
const isMobile = window.innerWidth < 640;
const margin = { top: 12, right: 28, bottom: 44, left: 56 };
const width  = Math.min(960, window.innerWidth - (isMobile ? 20 : 48));
const height = Math.min(620, width * 0.68);
const plotW  = width - margin.left - margin.right;
const plotH  = height - margin.top - margin.bottom;

// =============================================================================
// SCALES
// =============================================================================
const xScale = d3Scale(-3.2, 3.2, margin.left, margin.left + plotW);
const yScale = d3Scale(-3.2, 3.2, margin.top + plotH, margin.top);

function d3Scale(domMin, domMax, ranMin, ranMax) {
  const m = (ranMax - ranMin) / (domMax - domMin);
  const b = ranMin - m * domMin;
  return v => m * v + b;
}

// =============================================================================
// SVG SETUP
// =============================================================================
const svg = document.getElementById('chart');
svg.setAttribute('width', width);
svg.setAttribute('height', height);
svg.setAttribute('viewBox', `0 0 ${width} ${height}`);

// Helper: create SVG element
function el(tag, attrs, parent) {
  const e = document.createElementNS('http://www.w3.org/2000/svg', tag);
  for (const [k, v] of Object.entries(attrs || {})) e.setAttribute(k, v);
  (parent || svg).appendChild(e);
  return e;
}

// Defs for glow filters and star marker
const defs = el('defs');
ARCH_ORDER.forEach(arch => {
  const cfg = ARCH_CFG[arch];
  const filter = el('filter', { id: `glow-${arch}`, x: '-50%', y: '-50%', width: '200%', height: '200%' }, defs);
  const flood = el('feFlood', { 'flood-color': cfg.color, 'flood-opacity': '0.6', result: 'flood' }, filter);
  const comp  = el('feComposite', { in: 'flood', in2: 'SourceGraphic', operator: 'in', result: 'mask' }, filter);
  const blur  = el('feGaussianBlur', { in: 'mask', stdDeviation: '3', result: 'blur' }, filter);
  const merge = el('feMerge', {}, filter);
  el('feMergeNode', { in: 'blur' }, merge);
  el('feMergeNode', { in: 'SourceGraphic' }, merge);
});

// =============================================================================
// DRAW BACKGROUND
// =============================================================================
// Grid lines
for (let v = -3; v <= 3; v++) {
  el('line', { x1: xScale(v), y1: margin.top, x2: xScale(v), y2: margin.top + plotH, class: v === 0 ? 'zero-line' : 'grid-line' });
  el('line', { x1: margin.left, y1: yScale(v), x2: margin.left + plotW, y2: yScale(v), class: v === 0 ? 'zero-line' : 'grid-line' });
}

// Threshold lines at ±0.5
[-0.5, 0.5].forEach(v => {
  el('line', { x1: xScale(v), y1: margin.top, x2: xScale(v), y2: margin.top + plotH, class: 'threshold-line' });
  el('line', { x1: margin.left, y1: yScale(v), x2: margin.left + plotW, y2: yScale(v), class: 'threshold-line' });
});

// Quadrant fills
function quadFill(x0, x1, y0, y1, color) {
  el('rect', {
    x: xScale(x0), y: yScale(y1),
    width: xScale(x1) - xScale(x0),
    height: yScale(y0) - yScale(y1),
    fill: color, opacity: '1',
  });
}
quadFill(-3.2, -0.5, 0.5, 3.2, 'rgba(0,212,255,0.03)');
quadFill(0.5, 3.2, 0.5, 3.2, 'rgba(255,179,71,0.03)');
quadFill(-3.2, -0.5, -3.2, -0.5, 'rgba(231,76,60,0.03)');
quadFill(0.5, 3.2, -3.2, -0.5, 'rgba(107,122,141,0.03)');

// Quadrant labels
function qLabel(text, x, y, color) {
  el('text', { x: xScale(x), y: yScale(y), fill: color, 'text-anchor': 'middle', class: 'quadrant-label' }).textContent = text;
}
qLabel('SNIPER',    -2.2, 2.6, 'rgba(0,212,255,0.55)');
qLabel('CHAOS',      2.2, 2.6, 'rgba(255,179,71,0.55)');
qLabel('SELECTIVE', -2.2, -2.6, 'rgba(231,76,60,0.55)');
qLabel('LOST',       2.2, -2.6, 'rgba(107,122,141,0.55)');

// Axis labels
const xTicks = [-3,-2,-1,0,1,2,3];
xTicks.forEach(v => {
  el('text', { x: xScale(v), y: margin.top + plotH + 18, 'text-anchor': 'middle', class: 'axis-label' }).textContent = v;
});
const yTicks = [-3,-2,-1,0,1,2,3];
yTicks.forEach(v => {
  el('text', { x: margin.left - 10, y: yScale(v) + 4, 'text-anchor': 'end', class: 'axis-label' }).textContent = v;
});

// Axis titles
el('text', { x: xScale(0), y: margin.top + plotH + 38, 'text-anchor': 'middle', class: 'axis-title' }).textContent = '← Concentrated          Location Entropy (z-score)          Scattered →';
const yTitle = el('text', { x: 0, y: 0, 'text-anchor': 'middle', class: 'axis-title', transform: `translate(16, ${yScale(0)}) rotate(-90)` });
yTitle.textContent = 'Shots per Game (z-score)';

// Arrow hints
el('text', { x: xScale(0), y: margin.top + 10, 'text-anchor': 'middle', fill: '#2a3444', 'font-size': '9px' }).textContent = '↑ High Volume';
el('text', { x: xScale(0), y: margin.top + plotH - 4, 'text-anchor': 'middle', fill: '#2a3444', 'font-size': '9px' }).textContent = '↓ Low Volume';

// Data layer group
const dataLayer = el('g', { id: 'dataLayer' });

// =============================================================================
// DRAW DATA POINTS
// =============================================================================
let currentSeason = SEASONS[SEASONS.length - 1];
let activeArch = null; // for legend filtering

function getShape(shape, cx, cy, r) {
  if (shape === 'star') {
    const pts = [];
    for (let i = 0; i < 10; i++) {
      const a = (Math.PI / 2 * 3) + (i * Math.PI / 5);
      const rad = i % 2 === 0 ? r * 1.2 : r * 0.5;
      pts.push(`${cx + Math.cos(a) * rad},${cy - Math.sin(a) * rad}`);
    }
    return pts.join(' ');
  }
  if (shape === 'square') {
    const s = r * 0.85;
    return `${cx-s},${cy-s} ${cx+s},${cy-s} ${cx+s},${cy+s} ${cx-s},${cy+s}`;
  }
  if (shape === 'x') {
    const s = r * 0.8;
    // diamond-like cross
    return `${cx},${cy-s} ${cx+s*0.3},${cy-s*0.3} ${cx+s},${cy} ${cx+s*0.3},${cy+s*0.3} ${cx},${cy+s} ${cx-s*0.3},${cy+s*0.3} ${cx-s},${cy} ${cx-s*0.3},${cy-s*0.3}`;
  }
  return null; // circle — use <circle>
}

function renderSeason(season, animate) {
  currentSeason = season;
  const sd = DATA[season];
  dataLayer.innerHTML = '';

  const allTeams = [];
  ARCH_ORDER.forEach(arch => {
    (sd[arch] || []).forEach(t => allTeams.push({ arch, t }));
  });

  // Draw NEUTRAL first (behind), then others
  allTeams.sort((a, b) => {
    if (a.arch === 'NEUTRAL' && b.arch !== 'NEUTRAL') return -1;
    if (a.arch !== 'NEUTRAL' && b.arch === 'NEUTRAL') return 1;
    return 0;
  });

  allTeams.forEach(({ arch, t }, i) => {
    const cfg = ARCH_CFG[arch];
    const cx = xScale(t[1]);
    const cy = yScale(t[2]);
    const dimmed = activeArch && activeArch !== arch;
    const op = dimmed ? 0.08 : (arch === 'NEUTRAL' ? 0.4 : 0.85);
    const g = el('g', { class: 'team-group', 'data-arch': arch }, dataLayer);

    if (cfg.shape === 'dot' || cfg.shape === 'circle') {
      const circle = el('circle', {
        cx, cy, r: cfg.r,
        fill: cfg.color,
        opacity: op,
        stroke: cfg.color,
        'stroke-width': arch === 'NEUTRAL' ? 0 : 1,
        'stroke-opacity': 0.3,
        class: 'team-dot',
      }, g);
    } else {
      const pts = getShape(cfg.shape, cx, cy, cfg.r);
      el('polygon', {
        points: pts,
        fill: cfg.color,
        opacity: op,
        stroke: cfg.color,
        'stroke-width': 1,
        'stroke-opacity': 0.3,
        class: 'team-dot',
      }, g);
    }

    // Label (skip NEUTRAL)
    if (arch !== 'NEUTRAL' && !dimmed) {
      el('text', {
        x: cx,
        y: cy - cfg.r - 4,
        'text-anchor': 'middle',
        fill: cfg.color,
        opacity: 0.9,
        class: 'team-label',
      }, g).textContent = t[0];
    }

    // Hover zone (invisible larger circle)
    const hit = el('circle', {
      cx, cy, r: Math.max(cfg.r + 4, 12),
      fill: 'transparent',
      class: 'team-dot',
      style: 'cursor:pointer',
    }, g);

    hit.addEventListener('mouseenter', e => showTooltip(e, t, arch, season, cx, cy, cfg));
    hit.addEventListener('mousemove', e => moveTooltip(e));
    hit.addEventListener('mouseleave', hideTooltip);
    hit.addEventListener('click', e => showTooltip(e, t, arch, season, cx, cy, cfg));
  });

  // Animate in
  if (animate) {
    const dots = dataLayer.querySelectorAll('.team-dot');
    dots.forEach((d, i) => {
      d.style.transition = 'none';
      d.style.opacity = '0';
      requestAnimationFrame(() => {
        d.style.transition = `opacity 0.4s ease ${i * 2}ms`;
        d.style.opacity = '';
      });
    });
  }
}

// =============================================================================
// TOOLTIP
// =============================================================================
const tooltip = document.getElementById('tooltip');
const ttTeam   = document.getElementById('ttTeam');
const ttSeason = document.getElementById('ttSeason');
const ttBadge  = document.getElementById('ttBadge');
const ttGrid   = document.getElementById('ttGrid');

function showTooltip(e, t, arch, season, cx, cy, cfg) {
  ttTeam.textContent = t[3];
  ttTeam.style.color = cfg.color;
  ttSeason.textContent = season;
  ttBadge.textContent = arch;
  ttBadge.style.background = cfg.bg;
  ttBadge.style.color = cfg.color;
  ttBadge.style.border = `1px solid ${cfg.color}33`;

  ttGrid.innerHTML = [
    ['ENTROPY', t[4]], ['SHOTS/GM', t[5]],
    ['GF/GM', t[6]],   ['GA/GM', t[7]],
    ['xG/SHOT', t[8]], ['', ''],
  ].filter(([l]) => l).map(([label, val]) =>
    `<div><div class="tooltip-stat-label">${label}</div><div class="tooltip-stat-value" style="color:${cfg.color}">${val}</div></div>`
  ).join('');

  // Highlight dot
  const parent = e.target.parentNode;
  const dot = parent.querySelector('polygon, circle:first-child');
  if (dot) dot.setAttribute('filter', `url(#glow-${arch})`);

  tooltip.classList.add('active');
  moveTooltip(e);
}

function moveTooltip(e) {
  const pad = 16;
  let x = e.clientX + pad;
  let y = e.clientY - 40;
  const rect = tooltip.getBoundingClientRect();
  if (x + rect.width > window.innerWidth - pad) x = e.clientX - rect.width - pad;
  if (y < pad) y = pad;
  if (y + rect.height > window.innerHeight - pad) y = window.innerHeight - rect.height - pad;
  tooltip.style.left = x + 'px';
  tooltip.style.top = y + 'px';
}

function hideTooltip(e) {
  tooltip.classList.remove('active');
  // Remove glow
  if (e && e.target) {
    const parent = e.target.parentNode;
    const dot = parent && parent.querySelector('polygon, circle:first-child');
    if (dot) dot.removeAttribute('filter');
  }
}

// =============================================================================
// LEGEND — with click-to-filter
// =============================================================================
const legendEl = document.getElementById('legend');
ARCH_ORDER.forEach(arch => {
  const cfg = ARCH_CFG[arch];
  const item = document.createElement('div');
  item.className = 'legend-item';
  item.dataset.arch = arch;

  let swatchClass = 'legend-swatch';
  if (arch === 'SNIPER') swatchClass += ' star';
  if (arch === 'LOST') swatchClass += ' x-mark';

  const swatch = document.createElement('div');
  swatch.className = swatchClass;
  if (arch !== 'LOST') swatch.style.background = cfg.color;
  if (arch === 'SNIPER') swatch.style.background = cfg.color;

  item.appendChild(swatch);
  item.appendChild(document.createTextNode(cfg.label));
  item.addEventListener('click', () => toggleArch(arch));
  legendEl.appendChild(item);
});

function toggleArch(arch) {
  if (activeArch === arch) {
    activeArch = null;
  } else {
    activeArch = arch;
  }
  document.querySelectorAll('.legend-item').forEach(el => {
    el.classList.toggle('dimmed', activeArch && el.dataset.arch !== activeArch);
  });
  renderSeason(currentSeason, false);
}

// =============================================================================
// SLIDER
// =============================================================================
const slider    = document.getElementById('seasonSlider');
const label     = document.getElementById('seasonLabel');
const trackFill = document.getElementById('trackFill');
const ticksEl   = document.getElementById('sliderTicks');

slider.max = SEASONS.length - 1;
slider.value = SEASONS.length - 1;

SEASONS.forEach((s, i) => {
  const tick = document.createElement('div');
  tick.className = 'slider-tick' + (i === SEASONS.length - 1 ? ' active' : '');
  tick.textContent = s.split('-')[0].slice(2) + '-' + s.split('-')[1].slice(2);
  tick.addEventListener('click', () => {
    slider.value = i;
    updateSlider();
  });
  ticksEl.appendChild(tick);
});

function updateSlider() {
  const idx = +slider.value;
  const season = SEASONS[idx];
  const pct = (idx / (SEASONS.length - 1)) * 100;

  label.textContent = `Season: ${season}`;
  trackFill.style.width = pct + '%';

  document.querySelectorAll('.slider-tick').forEach((t, i) => {
    t.classList.toggle('active', i === idx);
  });

  renderSeason(season, true);
}

slider.addEventListener('input', updateSlider);

// =============================================================================
// KEYBOARD NAV
// =============================================================================
document.addEventListener('keydown', e => {
  if (e.key === 'ArrowLeft' && +slider.value > 0) {
    slider.value = +slider.value - 1;
    updateSlider();
  }
  if (e.key === 'ArrowRight' && +slider.value < SEASONS.length - 1) {
    slider.value = +slider.value + 1;
    updateSlider();
  }
});

// =============================================================================
// INITIAL RENDER
// =============================================================================
renderSeason(SEASONS[SEASONS.length - 1], true);
</script>
</body>
</html>